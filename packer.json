{
  "builders": [
    {
      "type": "amazon-ebs",
      "region": "ap-northeast-1",
      "source_ami": "ami-0f9ae750e8274075b",
      "instance_type": "t2.micro",
      "ssh_username": "ec2-user",
      "ami_name": "redisinsight-ami_{{isotime \"2006_01_02_03_04\"}}"
    }
  ],
    "provisioners": [
      {
        "type": "file",
        "destination": "/tmp/",
        "source": "./redisinsight.service"
      },
      {
        "type": "file",
        "destination": "/tmp/",
        "source": "./redisinsight.sh"
      },
      {
        "type":  "shell",
        "inline": [
          "sudo yum -y update",
          "sudo yum -y install docker",
          "sudo systemctl start docker && sudo systemctl enable docker" ,
          "sudo usermod -a -G docker ec2-user",
          "sudo docker pull redislabs/redisinsight:latest",
          "sudo mv /tmp/redisinsight.sh /usr/local/bin/",
          "sudo mv /tmp/redisinsight.service /usr/lib/systemd/system/",
          "sudo systemctl enable redisinsight"
        ]
      }
    ]
}